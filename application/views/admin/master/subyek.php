<!DOCTYPE html>
<!-- 
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 4
Version: 5.0.5
Author: KeenThemes
Website: http://www.keenthemes.com/
Contact: support@keenthemes.com
Follow: www.twitter.com/keenthemes
Dribbble: www.dribbble.com/keenthemes
Like: www.facebook.com/keenthemes
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
Renew Support: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
License: You must have a valid license purchased only from themeforest(the above link) in order to legally use the theme for your project.
-->
<html lang="en" >
	<?php echo $header; ?>
				<!-- END: Left Aside -->
				
				<div class="m-grid__item m-grid__item--fluid m-wrapper">
				<div class="m-subheader ">
						<div class="d-flex align-items-center">
							<div class="mr-auto">
								<h3 class="m-subheader__title m-subheader__title--separator">
									<?php echo $title;?>
								</h3>
								<ul class="m-subheader__breadcrumbs m-nav m-nav--inline">
									<li class="m-nav__item m-nav__item--home">
										<a href="#" class="m-nav__link m-nav__link--icon">
											<i class="m-nav__link-icon la la-home"></i>
										</a>
									</li>
									<li class="m-nav__separator">
										-
									</li>
									<li class="m-nav__item">
										<a href="" class="m-nav__link">
											<span class="m-nav__link-text">
												Datatables
											</span>
										</a>
									</li>
									<li class="m-nav__separator">
										-
									</li>
									<li class="m-nav__item">
										<a href="" class="m-nav__link">
											<span class="m-nav__link-text">
												Base
											</span>
										</a>
									</li>
									<li class="m-nav__separator">
										-
									</li>
									<li class="m-nav__item">
										<a href="" class="m-nav__link">
											<span class="m-nav__link-text">
												Local Data
											</span>
										</a>
									</li>
								</ul>
							</div>
							<div>
								<div class="m-dropdown m-dropdown--inline m-dropdown--arrow m-dropdown--align-right m-dropdown--align-push" data-dropdown-toggle="hover" aria-expanded="true">
									<a href="#" class="m-portlet__nav-link btn btn-lg btn-secondary  m-btn m-btn--outline-2x m-btn--air m-btn--icon m-btn--icon-only m-btn--pill  m-dropdown__toggle">
										<i class="la la-plus m--hide"></i>
										<i class="la la-ellipsis-h"></i>
									</a>
									<div class="m-dropdown__wrapper">
										<span class="m-dropdown__arrow m-dropdown__arrow--right m-dropdown__arrow--adjust"></span>
										<div class="m-dropdown__inner">
											<div class="m-dropdown__body">
												<div class="m-dropdown__content">
													<ul class="m-nav">
														<li class="m-nav__section m-nav__section--first m--hide">
															<span class="m-nav__section-text">
																Quick Actions
															</span>
														</li>
														<li class="m-nav__item">
															<a href="" class="m-nav__link">
																<i class="m-nav__link-icon flaticon-share"></i>
																<span class="m-nav__link-text">
																	Activity
																</span>
															</a>
														</li>
														<li class="m-nav__item">
															<a href="" class="m-nav__link">
																<i class="m-nav__link-icon flaticon-chat-1"></i>
																<span class="m-nav__link-text">
																	Messages
																</span>
															</a>
														</li>
														<li class="m-nav__item">
															<a href="" class="m-nav__link">
																<i class="m-nav__link-icon flaticon-info"></i>
																<span class="m-nav__link-text">
																	FAQ
																</span>
															</a>
														</li>
														<li class="m-nav__item">
															<a href="" class="m-nav__link">
																<i class="m-nav__link-icon flaticon-lifebuoy"></i>
																<span class="m-nav__link-text">
																	Support
																</span>
															</a>
														</li>
														<li class="m-nav__separator m-nav__separator--fit"></li>
														<li class="m-nav__item">
															<a href="#" class="btn btn-outline-danger m-btn m-btn--pill m-btn--wide btn-sm">
																Submit
															</a>
														</li>
													</ul>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				<div class="m-content">
						<div class="m-alert m-alert--icon m-alert--air m-alert--square alert alert-dismissible m--margin-bottom-30" role="alert">
							<div class="m-alert__icon">
								<i class="flaticon-exclamation m--font-primary"></i>
							</div>
							<div class="m-alert__text">
								Fungsi GMD: Memberitahu pemustaka sedini mungkin tentang format/bentuk fisik dokumen Mengisyaratkan pada pemustaka bahwa diperlukan alat khusus Menjadi sarana untuk membedakan dokumen dengan judul sama tapi bentuk berbeda Meskipun telah diganti dengan aturan Resource Description and Access (RDA), masih banyak institusi yang menggunakan AACR2 Dalam AACR2 terdapat 2 daftar GMD, daftar pertama digunakan di Inggris, yang kedua digunakan di Amerika Serikat. Indonesia menggunakan daftar kedua.
							</div>
						</div>
						
						<!-- Tabel baru di atas Daftar Subyek -->
						<div class="m-portlet m-portlet--mobile">
							<div class="m-portlet__head">
								<div class="m-portlet__head-caption">
									<div class="m-portlet__head-title">
										<h3 class="m-portlet__head-text">
											Daftar Rujukan Silang
										</h3>
									</div>
								</div>
							</div>
							<div class="m-portlet__body">
								<!-- Isi tabel baru Anda di sini -->
								<div class="m-form m-form--label-align-right m--margin-top-20 m--margin-bottom-30">
									<div class="row align-items-center">
										<div class="col-xl-8 order-2 order-xl-1">
											<div class="form-group m-form__group row align-items-center">
												
												<div class="col-md-6">
													<div class="m-input-icon m-input-icon--left">
														<input type="text" class="form-control m-input" placeholder="Search..." id="generalSearch1">
														<span class="m-input-icon__icon m-input-icon__icon--left">
															<span>
																<i class="la la-search"></i>
															</span>
														</span>
													</div>
												</div>
											</div>
										</div>
										<div class="col-xl-4 order-1 order-xl-2 m--align-right">
											<a href="#" class="btn btn-primary m-btn m-btn--custom m-btn--icon m-btn--air m-btn--pill" data-toggle="modal" data-target="#addModalRujuk">
												<span>
													<i class="la la-plus-circle"></i>
													<span>
														Tambah Istilah Baru
													</span>
												</span>
											</a>
											<div class="m-separator m-separator--dashed d-xl-none"></div>
										</div>
									</div>
								</div>
								<table class="m-datatable" id="html_table_1" width="100%">
									<thead>
										<tr>
											<th title="Field #1">
												No.
											</th>
											<th title="Field #2">
												Kode Rujukan
											</th>
											<th title="Field #3">
												Penjelasan
											</th>
											<th title="Field #4">
												Terakhir Update
											</th>
											<th title="Field #5">
												Aksi
											</th>
											<!-- Tambahkan lebih banyak kolom sesuai kebutuhan -->
										</tr>
									</thead>
									<tbody>
										<?php $count = 1; ?>
            						<?php foreach ($rujukan as $r): ?>
                						<tr>
                    						<td><?php echo $count; ?></td>
                    						<td><?php echo $r->kode; ?></td>
											<td><?php echo $r->penjelasan; ?></td>
											<td><?php if($r->last_update !== null && $r->last_update !== '00-00-0000'){
														echo $r->last_update;
													} else {
														echo "-" ;
													}
												?></td>
                    						<td>
                       						 <!-- Tambahkan ikon hapus -->
												<a class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill btnEditRujuk" title="Edit" data-id="<?php echo $r->id; ?>">
    											<i class="la la-edit"></i></a>
												<a class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill btnDeleteRujuk" title="Delete" data-id="<?php echo $r->id; ?>" data-kode="<?php echo $r->kode; ?>">
    											<i class="la la-trash"></i>
												</a>
                    						</td>
                						</tr>
                					<?php $count++; ?>
            						<?php endforeach; ?>
									</tbody>
								</table>
							</div>
						</div>
						<!-- Akhir Tabel baru -->


						<div class="m-portlet m-portlet--mobile">
							<div class="m-portlet__head">
								<div class="m-portlet__head-caption">
									<div class="m-portlet__head-title">
										<h3 class="m-portlet__head-text">
											Daftar Subyek
											<small>
												
											</small>
										</h3>
									</div>
								</div>
							</div>
							<div class="m-portlet__body">
								<!--begin: Search Form -->
								<div class="m-form m-form--label-align-right m--margin-top-20 m--margin-bottom-30">
									<div class="row align-items-center">
										<div class="col-xl-8 order-2 order-xl-1">
											<div class="form-group m-form__group row align-items-center">
												
												<div class="col-md-6">
													<div class="m-input-icon m-input-icon--left">
														<input type="text" class="form-control m-input" placeholder="Search..." id="generalSearch2">
														<span class="m-input-icon__icon m-input-icon__icon--left">
															<span>
																<i class="la la-search"></i>
															</span>
														</span>
													</div>
												</div>
											</div>
										</div>
										<div class="col-xl-4 order-1 order-xl-2 m--align-right">
											<a href="#" class="btn btn-primary m-btn m-btn--custom m-btn--icon m-btn--air m-btn--pill" data-toggle="modal" data-target="#addModal">
												<span>
													<i class="la la-plus-circle"></i>
													<span>
														Tambah data Subyek
													</span>
												</span>
											</a>
											<div class="m-separator m-separator--dashed d-xl-none"></div>
										</div>
									</div>
								</div>
								<!--end: Search Form -->
								<!--begin: Datatable -->
								<table class="m-datatable" id="html_table_2" width="100%">
    								<thead>
										<tr>
											<th title="Field #1">
												No. urut
											</th>
											<th title="Field #2">
												Nama Subyek
											</th>
											<th title="Field #3">
												Kode Klasifikasi
											</th>
											<th title="Field #4">
												Tipe Subyek
											</th>
											<th title="Field #5">
												Terakhir Update
											</th>
											<th title="Field #6">
												Aksi
											</th>
										</tr>
    								</thead>
    								<tbody>
									<?php $count = 1; ?>
            						<?php foreach ($subyek as $med): ?>
                						<tr>
                    						<td><?php echo $count; ?></td>
                    						<td><?php echo $med->subyek; ?></td>
											<td><?php echo $med->kode; ?></td>
											<td><?php echo $med->tipe_subyek; ?></td>
                    						<td><?php if($med->last_update !== null){
														echo $med->last_update;
													} else {
														echo "-" ;
													}
												?></td>
                    						<td>
                       						 <!-- Tambahkan ikon hapus -->
												<a class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill btnEditMedia" title="Edit" data-id="<?php echo $med->id; ?>">
    											<i class="la la-edit"></i></a>
												<a class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill btnDeleteMedia" title="Delete" data-id="<?php echo $med->id; ?>" data-subyek="<?php echo $med->subyek; ?>">
    											<i class="la la-trash"></i>
												</a>
                    						</td>
                						</tr>
                					<?php $count++; ?>
            						<?php endforeach; ?>
    								</tbody>
								</table>

								<!--end: Datatable -->
							</div>
						</div>
					</div>
				</div>
			</div>
			
		<!-- application/views/gmd_view.php -->

<!-- Edit Modal Subyek -->
<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Edit Pengarang</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="editMediaForm" action="<?php echo base_url('admin/master/Subyek/updateSubyek'); ?>" method="post">
                <div class="form-group">
                    <label for="subyek" class="form-control-label">Subyek</label>
                    <input type="text" class="form-control" id="subyek" name="subyek">
                </div>
				<div class="form-group">
                    <label for="kode" class="form-control-label">Kode Klasifikasi</label>
                    <input class="form-control" id="kode" name="kode"></input>
                </div>
				<div class="form-group">
                    <label for="tipe_subyek" class="form-control-label">Tipe Subyek</label>
                    <select class="form-control m-input" id="tipe_subyek" name="tipe_subyek">
						<option value="1">Topik</option>
						<option value="2">Geografis</option>
						<option value="3">Nama</option>
						<option value="4">Masa</option>
						<option value="5">Aliran</option>
						<option value="6">Pekerjaan</option>
					</select>
                </div>
				<div class="form-group">
                    <label for="daftar_terkendali" class="form-control-label">Daftar Terkendali</label>
                    <input class="form-control" id="daftar_terkendali" name="daftar_terkendali"></input>
                </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary" id="btnUpdateSubyek">Update data</button>
                <input type="hidden" id="subyekId" name="subyekId">
            </div>
        </div>
    </div>
</div>
</div>
<!-- Edit Modal Rujukan Silang -->
<div class="modal fade" id="editModalRujuk" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Edit Istilah Baru</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
			<form id="editRujukForm" action="<?php echo base_url('admin/master/Subyek/updateRujuk'); ?>" method="post">
				<div class="form-group">
                    <label for="kode_r" class="form-control-label">Kode Rujukan Silang</label>
                    <input type="text" class="form-control" id="kode_r" name="kode">
                </div>
				<div class="form-group">
                    <label for="penjelasan" class="form-control-label">Penjelasan</label>
                    <input class="form-control" id="penjelasan" name="penjelasan"></input>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary" id="btnUpdateRujuk">Update data</button>
                <input type="hidden" id="rujukId" name="rujukId">
            </div>
        </div>
    </div>
</div>
<!-- Add Modal Rujukan Silang -->
<div class="modal fade" id="addModalRujuk" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Tambah Istilah Baru</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
				<div class="form-group">
                    <label for="kode" class="form-control-label">Kode Rujukan Silang</label>
                    <input type="text" class="form-control" id="kd" name="kode">
                </div>
				<div class="form-group">
                    <label for="penjelasan" class="form-control-label">Penjelasan</label>
                    <input class="form-control" id="penjelas" name="penjelasan"></input>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="btnAddRujuk">Tambah data</button>
            </div>
        </div>
    </div>
</div>

<!-- Add Modal Subyek -->
<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Tambah Data Subyek</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
				<div class="form-group">
                    <label for="subyek" class="form-control-label">Subyek</label>
                    <input type="text" class="form-control" id="sub" name="subyek">
                </div>
				<div class="form-group">
                    <label for="kode" class="form-control-label">Kode Klasifikasi</label>
                    <input class="form-control" id="kd" name="kode"></input>
                </div>
				<div class="form-group">
                    <label for="tipe_subyek" class="form-control-label">Tipe Subyek</label>
                    <select class="form-control m-input" id="tipe" name="tipe_subyek">
						<option value="1">Topik</option>
						<option value="2">Geografis</option>
						<option value="3">Nama</option>
						<option value="4">Masa</option>
						<option value="5">Aliran</option>
						<option value="6">Pekerjaan</option>
					</select>
                </div>
				<div class="form-group">
                    <label for="daftar_terkendali" class="form-control-label">Daftar Terkendali</label>
                    <input class="form-control" id="daftar" name="daftar_terkendali"></input>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="btnAddSubyek">Tambah data</button>
            </div>
        </div>
    </div>
</div>



</div>
    </div>
</div>
<!-- ... -->

			<!-- end:: Body -->
<!-- begin::Footer -->
	<?php echo $footer; ?>
	</body>
	<!-- end::Body -->
</html>


<script>
//== Class definition
var DatatableHtmlTableDemo = function() {
  //== Private functions

  // Demo initializer untuk tabel pertama
  var demoTable1 = function() {
    var datatable = $('#html_table_1').mDatatable({
      data: {
        saveState: {cookie: false},
      },
      search: {
        input: $('#generalSearch1'),
      }
    });
  };

  // Demo initializer untuk tabel kedua
  var demoTable2 = function() {
    var datatable = $('#html_table_2').mDatatable({
      data: {
        saveState: {cookie: false},
      },
      search: {
        input: $('#generalSearch2'),
      }
    });
  };

  return {
    //== Public functions
    init: function() {
      // Init kedua demo
      demoTable1();
      demoTable2();
    },
  };
}();

jQuery(document).ready(function() {
  DatatableHtmlTableDemo.init();
});
</script>


<script>
    $(document).ready(function () {
		function handleDelete(id, subyek) {
			if (confirm("Apakah Anda yakin ingin menghapus data Subyek [" + subyek + "]?")) {
				$.post("<?php echo base_url('admin/master/Subyek/deleteSubyek/'); ?>" + id, function (response) {
					if (response.status === "success") {
						alert(response.message);
						location.reload();
					}
				}, 'json');
			}
		}

		function handleDeleteRujuk(id, kode) {
			if (confirm("Apakah Anda yakin ingin menghapus data Istilah [" + kode + "]?")) {
				$.post("<?php echo base_url('admin/master/Subyek/deleteRujuk/'); ?>" + id, function (response) {
					if (response.status === "success") {
						alert(response.message);
						location.reload();
					}
				}, 'json');
			}
		}
		

		$("#btnAddSubyek").click(function (event) { // Add 'event' parameter here
        event.preventDefault(); // Prevent the default form submission
		var subyek = $("#sub").val();
		var kode = $("#kd").val();
		var tipe_subyek = $("#tipe").val();
		var daftar_terkendali = $("#daftar").val();

            $.ajax({
                url: "<?php echo base_url('admin/master/Subyek/addSubyek'); ?>",
                type: "POST",
                data: {
                    subyek : subyek,
					kode : kode,
					tipe_subyek : tipe_subyek,
					daftar_terkendali : daftar_terkendali
                },
                dataType: "json",
                success: function (response) {
                    if (response.status === 'success') {
                        // Clear form fields
                        $("#sub").val("");
						$("#kode").val("");
						$("#tipe").val("");
						$("#daftar").val("");
                        // Close the modal
                        $("#addModal").modal('hide');
                        // Display success message (you can customize this)
						alert(response.message);
						location.reload();
                    } else {
                        // Display error message (you can customize this)
                        alert(response.message);
                    }
                },
                error: function (xhr, status, error) {
                    alert("Terjadi kesalahan saat menghubungi server.");
                }
            });
        });

		$("#btnAddRujuk").click(function (event) { // Add 'event' parameter here
        event.preventDefault(); // Prevent the default form submission
		var kode = $("#kd").val();
		var penjelasan = $("#penjelas").val();

            $.ajax({
                url: "<?php echo base_url('admin/master/Subyek/addRujuk'); ?>",
                type: "POST",
                data: {
                    kode : kode,
					penjelasan : penjelasan
                },
                dataType: "json",
                success: function (response) {
                    if (response.status === 'success') {
                        // Clear form fields
                        $("#kd").val("");
						$("#penjelas").val("");
                        // Close the modal
                        $("#addModalRujuk").modal('hide');
                        // Display success message (you can customize this)
						alert(response.message);
						location.reload();
                    } else {
                        // Display error message (you can customize this)
                        alert(response.message);
                    }
                },
                error: function (xhr, status, error) {
                    alert("Terjadi kesalahan saat menghubungi server.");
                }
            });
        });

        // Add event listener to the "Hapus" buttons
		$(document).on('click', '.btnDeleteMedia', function () {
			var id = $(this).data("id");
			var subyek = $(this).data("subyek");
			handleDelete(id, subyek);
    	});

		$(document).on('click', '.btnDeleteRujuk', function () {
			var id = $(this).data("id");
			var kode = $(this).data("kode");
			handleDeleteRujuk(id, kode);
    	});

        // Additional event listener for the "Edit" buttons
        $(document).on('click', '.btnEditMedia', function () {
            var subyekId = $(this).data('id');

            // AJAX request to fetch GMD data
            $.ajax({
                url: 'Subyek/editSubyek/' + subyekId,
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    $('#subyekId').val(data.id);
					$('#subyek').val(data.subyek);
                    $('#kode').val(data.kode);
                    $('#tipe_subyek').val(data.tipe_subyek);
					$('#daftar_terkendali').val(data.daftar_terkendali);
                    $('#editModal').modal('show');
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        });

		$(document).on('click', '.btnEditRujuk', function () {
            var rujukId = $(this).data('id');

            // AJAX request to fetch GMD data
            $.ajax({
                url: 'Subyek/editRujuk/' + rujukId,
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    $('#rujukId').val(data.id);
                    $('#kode_r').val(data.kode);
					$('#penjelasan').val(data.penjelasan);
                    $('#editModalRujuk').modal('show');
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        });

        function showUpdateSuccessAlert(message) {
            $("#updateSuccessAlert strong").text(message);
            $("#updateSuccessAlert").show();
        }

        function hideUpdateSuccessAlert() {
            $("#updateSuccessAlert").hide();
        }

        function handleUpdate() {
            var subyekId    = $("#subyekId").val();
            var subyek 		= $("#subyek").val();
			var kode		= $("#kode").val();
			var tipe_subyek = $("#tipe_subyek").val();
			var daftar_terkendali = $("#daftar_terkendali").val();

            $.ajax({
                url: 'Subyek/updateSubyek',
                type: "post",
                data: {
                    id: subyekId,
                    subyek: subyek,
					kode: kode,
					tipe_subyek: tipe_subyek,
					daftar_terkendali:daftar_terkendali
                },
                dataType: "json",
                success: function (response) {
                    if (response.status === "success") {
                        showUpdateSuccessAlert(response.message);
                        $("#editMediaForm")[0].reset();
                        alert(response.message);
                        location.reload();
                    } else if (response.status === "error") {
                        alert(response.message); // Show error message if needed
                    }
                },
                error: function () {
                    alert("Terjadi kesalahan saat memproses permintaan.");
                }
            });
        }

		function handleUpdateRujuk() {
            var rujukId    = $("#rujukId").val();
            var kode_r 		= $("#kode_r").val();
			var penjelasan	= $("#penjelasan").val();

            $.ajax({
                url: 'Subyek/updateRujuk',
                type: "post",
                data: {
                    id: rujukId,
					kode: kode_r,
					penjelasan: penjelasan
                },
                dataType: "json",
                success: function (response) {
                    if (response.status === "success") {
                        showUpdateSuccessAlert(response.message);
                        $("#editRujukForm")[0].reset();
                        alert(response.message);
                        location.reload();
                    } else if (response.status === "error") {
                        alert(response.message); // Show error message if needed
                    }
                },
                error: function () {
                    alert("Terjadi kesalahan saat memproses permintaan.");
                }
            });
        }

        $("#btnUpdateSubyek").click(function () {
            handleUpdate();
        });
		$("#btnUpdateRujuk").click(function () {
            handleUpdateRujuk();
        });
    });
</script>
